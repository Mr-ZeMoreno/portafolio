---
interface Props {
    gridArea: string;
}

const { gridArea } = Astro.props;
---

<script>
    document.addEventListener("DOMContentLoaded", () => {
        document
            .getElementById("input-form")
            ?.addEventListener("submit", function (event) {
                event.preventDefault();

                const inputElement = document.getElementById(
                    "input-msg",
                ) as HTMLInputElement;
                if (inputElement) {
                    const inputValue = inputElement.value;

                    inputElement.value = "";
                    console.log("Input Value:", inputValue);

                    const consola = document.querySelector(".consola");

                    if (inputValue.toLowerCase() == "clear") {
                        consola.innerHTML = "";
                        return;
                    }

                    const msgElement = document.querySelector(".msg");
                    if (msgElement) {
                        // Crear un nuevo párrafo
                        const newParagraph = document.createElement("div"); // Usar div para contener HTML
                        newParagraph.classList.add("inline-msg");
                        // Establecer el contenido HTML del nuevo párrafo
                        newParagraph.innerHTML = `<span class="green">></span><p> ${inputValue}</p>`;

                        if (consola) {
                            consola.appendChild(newParagraph);
                        }
                    }
                }
            });
    });
</script>

<div class="consola-box">
    <form id="input-form">
        <label>
            <span class="green">></span>
            <input id="input-msg" type="text" />
        </label>
    </form>
    <div class="consola msg"></div>
</div>

<style is:global>
    .inline-msg {
        display: flex;
        flex-direction: row;
        p {
            padding-left: 5px;
        }
    }
    .green {
        color: #25cc54;
    }
</style>

<style define:vars={{ gridArea }}>
    .consola-box,
    #input-form {
        font-family: "Orbitron";
    }

    #input-form {
        label {
            display: flex;
            flex-direction: row;
            input {
                background: transparent;
                border: 0;
                outline: none;
                padding-left: 5px;
                font-size: 12px;
                color: white;
            }
        }
    }
    .consola-box {
        grid-area: var(--gridArea);
        background-color: rgba(0, 0, 0, 0.161);
        display: flex;
        flex-direction: column-reverse;
        padding: 10px;
        padding-bottom: 5px;
        height: 100%;
        overflow-y: auto;
    }
    .consola {
        flex-direction: row;
        font-size: 12px;
    }
</style>
